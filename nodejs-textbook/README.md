# Node.js 교과서

개정 2판

조현영 지음

길벗

# 1. 노드 시작하기

## 1.1 핵심 개념 이해하기

Node.js 는 Chrome V8 Javascript 엔진으로 빌드된 JavaScript 런타임이다.

*런타임*: 특정 언어로 만든 프로그램들을 실행할 수 있는 환경.

*V8*: C 로 구현된 오픈소스 엔진.

*libuv*: C++ 로 구현된 비동기 I/O 처리 라이브러리.

*이벤트 기반*: 이벤트가 발생할 때 미리 지정해둔 작업을 수행하는 방식을 의미. 예를들어 클릭이나 네트워크 요청 등.

노드는 이벤트 기반 방식으로 동작하므로, 이벤트가 발생하면 이벤트 리스너에 등록해둔 롤백 함수를 호출. 발생한 이벤트가 없거나 발생했떤 이벤트를 다 처리하면, 노드는 다음 이벤트가 발생할 때까지 대기.

*이벤트 루프*: 이벤트 발생 시 호출할 콜백 함수들을 관리하고, 호출된 콜백 함수의 실행 순서를 결정하는 역할을 담당. 노드가 종료될 때까지 이벤트 처리를 위한 작업을 반복.
1. 호출 스택에 이벤트가 쌓임
2. 비동기 작업은 백그라운드로 보내짐
3. 백그라운드에서 완료된 작업은 태스크 큐로 보내짐
4. 호출 스택이 비면 태스큐 큐에서 이벤트를 꺼내 호출 스택으로 전달

*싱글 스레드*: 프로세스 내에서 실행되는 흐름의 단위. 프로세스는 스레드를 여러개 생성해 여러 작업을 동시에 처리할 수 있음. 스레드들은 같은 주소의 메모리에 접근 가능하므로 데이터를 공유할 수 있음.
- 노드는 내부적으로 여러 스레드를 생성하는데, 그 중에서 직접 제어 가능한 스레드는 하나뿐이기 때문에 싱글 스레드라고 여겨짐.
- 스레드 풀 (Thread Pool) 이나 워커 스레드 (Worker Thread) 를 사용할 때는 싱글 스레드로 동작하지 않음.

## 1.2 서버로서의 노드

장점
- 멀티 스레드 방식에 비해 적은 컴퓨터 자원 사용
- I/O 작업이 많은 서버로 적합
- 멀티 스레드 방식보다 쉬움
- 웹 서버가 내장되어 있음
- 자바스크립트를 사용함
- JSON 형식과 쉽게 호환됨

단점
- 기본적으로 싱글 스레드라서 CPU 코어를 하나만 사용
- CPU 작업이 많은 서버로는 부적합
- 하나뿐인 스레드가 멈추지 않도록 관리가 필요함
- 서버 규모가 커졌을 때 서버를 관리하기 어려움
- 어중간한 성능